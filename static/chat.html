<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SignalMesh â€” Real-Time Chat</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar" id="sidebar" aria-label="Online users">
      <div class="brand">
        <div class="logo" aria-hidden="true">ğŸŒ</div>
        <div>
          <div class="title">SignalMesh</div>
          <div class="subtitle">Live â€¢ Global</div>
        </div>
      </div>

      <div class="users-section">
        <div class="section-title">Online</div>
        <div id="user-count" class="muted small">Online: 0 users</div>
        <div id="viewer-count" class="muted small">Viewers: 0 total</div>
        <ul id="users-list" class="users-list" aria-live="polite"></ul>
      </div>

      <div class="credits muted small">Built with FastAPI + WebSockets</div>
    </aside>

    <main class="chat-area" role="main">
      <header class="chat-header">
        <div class="left-row">
          <button id="users-toggle" class="icon-btn" aria-label="Toggle users">â˜°</button>
          <div id="header-username" class="header-username">Viewing as guest</div>
        </div>
        <div id="typing-indicator" class="typing-indicator" aria-live="polite"></div>
      </header>

      <section id="chat-box" class="chat-box" aria-live="polite" tabindex="0"></section>

      <!-- composer is fixed via CSS so it's outside flow; keep markup here for semantics -->
      <form id="message-form" class="composer" onsubmit="return false;">
        <div class="left-controls">
          <button type="button" id="emoji-btn" class="icon-btn" title="Emoji" aria-label="Emoji">ğŸ˜€</button>
          <input type="file" id="file-input" aria-hidden="true" />
          <button type="button" id="attach-btn" class="icon-btn" title="Attach" aria-label="Attach">ğŸ“</button>
        </div>

        <textarea id="message-input" class="message-input" placeholder="Say something to the world..." rows="1" autocomplete="off"></textarea>

        <button id="send-btn" class="send-btn" aria-label="Send message">Send</button>
      </form>

      <!-- emoji picker container -->
      <div id="emoji-picker" class="emoji-picker" aria-hidden="true"></div>
    </main>
  </div>

  <!-- auth modal -->
  <div id="auth-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="auth-title">
    <div class="modal-card">
      <h2 id="auth-title">Welcome â€” Sign in or Sign up</h2>

      <div style="display:flex;gap:8px;">
        <button id="toggle-login" class="pill active">Login</button>
        <button id="toggle-signup" class="pill">Sign up</button>
      </div>

      <div id="auth-forms" style="display:flex;flex-direction:column;gap:8px;margin-top:8px;">
        <input id="auth-username" placeholder="username" maxlength="32" autocomplete="username" />
        <input id="auth-password" placeholder="password" type="password" maxlength="64" autocomplete="current-password" />
        <div style="display:flex;gap:8px;">
          <button id="auth-submit" class="primary" style="flex:1">Proceed</button>
          <button id="continue-guest" style="flex:1">Continue as guest</button>
        </div>
        <div id="auth-error" style="color:#ffb4b4;font-size:13px;min-height:18px"></div>
      </div>
    </div>
  </div>

  <!-- emoji picker library -->
  <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
  <script src="/static/chat.js"></script>
</body>
</html>
